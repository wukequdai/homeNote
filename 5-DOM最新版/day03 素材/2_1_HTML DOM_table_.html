<!DOCTYPE HTML>
<html>
<head>
<title>动态操作表格</title>
<meta charset="utf-8" />
<style>
	table{width:500px; border-collapse:collapse;
		text-align:center;
	}
	td{border:1px solid #ccc}
	thead td{font-weight:bold;}
</style>
<script>
	var data=[
{"id":1001,"name":'可口可乐',"price":2.5,"count":3000},
{"id":1003,"name":'百事可乐',"price":2.5,"count":5000},
{"id":1011,"name":'非常可乐',"price":2.3,"count":1000}
	];
	
</script>
</head>
<body>
	<div id="data"></div>
	<script type="text/javascript">
		+function(){
			//table
			var table=document.createElement("table");
			//thead
			var thead=table.createTHead();
			//tr
			var tr=thead.insertRow();
			//遍历属性名
			for(var key in data[0]){
				tr.insertCell().innerHTML=key;
			};
			//tbody
			var tbody=table.createTBody();
			//遍历
			for(var i=0;i<data.length;i++){
				//tbody中加tr
				var tr=tbody.insertRow();
				//遍历属性值
				for(var key in data[i]){
					tr.insertCell().innerHTML=data[i][key];
				}
				var btn=document.createElement("button");
				btn.innerHTML="删除";
				btn.onclick=deleteRow;
				//为tr多添加一个td，其中追加btn
				tr.insertCell().appendChild(btn);
				document.getElementById("data").appendChild(table);
			}
			function deleteRow(){
				var tr=this.parentNode.parentNode;
				var pname=tr.cells[1].innerHTML;
				if(confirm("go on deleting"+pname+"?"))
					table.deleteRow(tr.rowIndex);
			}
		}();
	</script>
</body>
</html>
